# 酒店管理接口文档

## 1. 酒店管理接口

### 1.1 获取酒店列表

- **URL**: `/api/hotels`
- **方法**: GET
- **认证**: 无需认证
- **查询参数**:
  - `page`: 页码，默认为1
  - `size`: 每页数量，默认为10
  - `search`: 搜索关键词
  - `status`: 状态筛选(pending/approved/rejected)

- **响应**:
```json
{
  "code": 200,
  "message": "获取酒店列表成功",
  "data": {
    "content": [
      {
        "hotelId": 1,
        "name": "豪华大酒店",
        "nameEn": "Grand Hotel",
        "description": "位于市中心的五星级酒店",
        "address": "北京市朝阳区建国路88号",
        "hotelRating": 5,
        "rating": 4.8,
        "price": 899,
        "lowestPrice": 799,
        "images": ["https://example.com/image1.jpg"],
        "location": {
          "city": "北京",
          "district": "朝阳区",
          "latitude": 39.9042,
          "longitude": 116.4074
        },
        "amenities": ["免费WiFi", "游泳池"],
        "isDiscount": true,
        "discountInfo": "8折优惠",
        "reviewScore": 4.8,
        "reviewCount": 256,
        "tags": ["亲子", "豪华", "免费停车"],
        "status": "pending",
        "createdAt": "2024-01-01T00:00:00.000Z",
        "updatedAt": "2024-01-01T00:00:00.000Z"
      }
    ],
    "totalElements": 1,
    "totalPages": 1,
    "number": 1,
    "size": 10
  }
}
```

### 1.2 获取单个酒店详情

- **URL**: `/api/hotels/:id`
- **方法**: GET
- **认证**: 无需认证
- **路径参数**:
  - `id`: 酒店ID

- **响应**:
```json
{
  "code": 200,
  "message": "获取酒店详情成功",
  "data": {
    "hotelId": 1,
    "name": "豪华大酒店",
    "nameEn": "Grand Hotel",
    "description": "位于市中心的五星级酒店",
    "address": "北京市朝阳区建国路88号",
    "hotelRating": 5,
    "rating": 4.8,
    "price": 899,
    "lowestPrice": 799,
    "images": ["https://example.com/image1.jpg"],
    "location": {
      "city": "北京",
      "district": "朝阳区",
      "latitude": 39.9042,
      "longitude": 116.4074
    },
    "amenities": ["免费WiFi", "游泳池"],
    "isDiscount": true,
    "discountInfo": "8折优惠",
    "reviewScore": 4.8,
    "reviewCount": 256,
    "tags": ["亲子", "豪华", "免费停车"],
    "status": "pending",
    "createdAt": "2024-01-01T00:00:00.000Z",
    "updatedAt": "2024-01-01T00:00:00.000Z"
  }
}
```

### 1.3 创建酒店

- **URL**: `/api/hotels`
- **方法**: POST
- **认证**: 需要认证
- **请求体**:
```json
{
  "name": "新酒店",
  "description": "酒店描述",
  "address": "酒店地址",
  "price": 599,
  "amenities": ["免费WiFi", "停车场"]
}
```

- **响应**:
```json
{
  "code": 200,
  "message": "酒店创建成功",
  "data": {
    "hotelId": 2,
    "name": "新酒店",
    "nameEn": null,
    "description": "酒店描述",
    "address": "酒店地址",
    "hotelRating": 0,
    "rating": 0,
    "price": 599,
    "lowestPrice": null,
    "images": [],
    "location": {
      "city": "",
      "district": null,
      "latitude": null,
      "longitude": null
    },
    "amenities": ["免费WiFi", "停车场"],
    "isDiscount": false,
    "discountInfo": null,
    "reviewScore": null,
    "reviewCount": 0,
    "tags": [],
    "status": "pending",
    "createdAt": "2024-01-01T00:00:00.000Z",
    "updatedAt": "2024-01-01T00:00:00.000Z"
  }
}
```

### 1.4 更新酒店信息

- **URL**: `/api/hotels/:id`
- **方法**: PUT
- **认证**: 需要认证（管理员权限）
- **路径参数**:
  - `id`: 酒店ID
- **请求体**:
```json
{
  "name": "更新后的酒店名称",
  "description": "更新后的描述",
  "address": "更新后的地址",
  "price": 699,
  "amenities": ["免费WiFi", "游泳池", "健身房"]
}
```

- **响应**:
```json
{
  "code": 200,
  "message": "酒店信息更新成功",
  "data": {
    "hotelId": 1,
    "name": "更新后的酒店名称",
    "nameEn": "Grand Hotel",
    "description": "更新后的描述",
    "address": "更新后的地址",
    "hotelRating": 5,
    "rating": 4.8,
    "price": 699,
    "lowestPrice": 599,
    "images": ["https://example.com/image1.jpg"],
    "location": {
      "city": "北京",
      "district": "朝阳区",
      "latitude": 39.9042,
      "longitude": 116.4074
    },
    "amenities": ["免费WiFi", "游泳池", "健身房"],
    "isDiscount": false,
    "discountInfo": null,
    "reviewScore": 4.8,
    "reviewCount": 256,
    "tags": ["亲子", "豪华", "免费停车"],
    "status": "pending",
    "createdAt": "2024-01-01T00:00:00.000Z",
    "updatedAt": "2024-01-02T00:00:00.000Z"
  }
}
```

### 1.5 更新酒店状态

- **URL**: `/api/hotels/:id/status`
- **方法**: PUT
- **认证**: 需要认证（管理员权限）
- **路径参数**:
  - `id`: 酒店ID
- **请求体**:
```json
{
  "status": "approved"
}
```

- **响应**:
```json
{
  "code": 200,
  "message": "酒店状态已更新",
  "data": {
    "hotelId": 1,
    "name": "豪华大酒店",
    "status": "approved"
  }
}
```

### 1.6 删除酒店

- **URL**: `/api/hotels/:id`
- **方法**: DELETE
- **认证**: 需要认证（管理员权限）
- **路径参数**:
  - `id`: 酒店ID

- **响应**:
```json
{
  "code": 200,
  "message": "酒店删除成功",
  "data": null
}
```

## 2. 错误码说明

| 错误码 | 说明 |
|--------|------|
| 200 | 成功 |
| 400 | 请求参数错误 |
| 401 | 未授权 |
| 403 | 禁止访问 |
| 404 | 资源不存在 |
| 500 | 服务器内部错误 |

## 3. 认证方式

- 使用JWT Bearer Token认证
- 请求头需包含: `Authorization: Bearer <token>`
- Token有效期为2小时

## 4. 酒店对象字段说明

| 字段名 | 类型 | 必选 | 说明 |
|--------|------|------|------|
| hotelId | string | 是 | 唯一标识 |
| name | string | 是 | 酒店名称（中文） |
| nameEn | string | 否 | 酒店英文名 |
| description | string | 否 | 酒店描述 |
| address | string | 是 | 酒店地址 |
| hotelRating | number | 是 | 酒店星级（1-5） |
| rating | number | 是 | 酒店评分（用于展示） |
| price | number | 是 | 参考价格（排序用，如最低价或均价） |
| lowestPrice | number | 否 | 最低价 |
| images | string[] | 是 | 酒店图片URL数组 |
| location | object | 是 | 位置信息 |
| location.city | string | 是 | 所在城市 |
| location.district | string | 否 | 区/县 |
| location.latitude | number | 否 | 纬度（用于地图展示） |
| location.longitude | number | 否 | 经度 |
| amenities | string[] | 否 | 设施列表，如 ["免费WiFi", "停车场"] |
| isDiscount | boolean | 否 | 是否有折扣 |
| discountInfo | string | 否 | 折扣信息，如 "8折" 或 "满减" |
| reviewScore | number | 否 | 评分（用于排序和展示） |
| reviewCount | number | 否 | 评论数量 |
| tags | string[] | 是 | 标签，如 ["亲子", "豪华", "免费停车"] |
| status | string | 是 | 状态：pending/approved/rejected |
| createdAt | string | 是 | 创建时间（ISO 8601格式） |
| updatedAt | string | 是 | 最后更新时间（ISO 8601格式） |