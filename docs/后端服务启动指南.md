# åç«¯æœåŠ¡å¯åŠ¨æŒ‡å—

## ğŸš€ å¿«é€Ÿå¯åŠ¨ï¼ˆ3 æ­¥ï¼Œ3 åˆ†é’Ÿï¼‰

### 1ï¸âƒ£ å®‰è£…ä¾èµ– (1 åˆ†é’Ÿ)

```bash
cd packages/backend
pnpm install
```

**é¢„æœŸç»“æœ**: âœ… ä¾èµ–å®‰è£…å®Œæˆï¼Œæ— é”™è¯¯

### 2ï¸âƒ£ å¯åŠ¨æœåŠ¡ (1 åˆ†é’Ÿ)

```bash
pnpm dev
```

**é¢„æœŸè¾“å‡º**:
```
âš ï¸  æ•°æ®åº“æœªå¯ç”¨ (è®¾ç½® DB_ENABLED=true æ¥å¯ç”¨æ•°æ®åº“)
âœ“ æœåŠ¡å™¨è¿è¡Œåœ¨ http://localhost:8080
âœ“ å¥åº·æ£€æŸ¥: http://localhost:8080/health
âœ“ API åŸºç¡€è·¯å¾„: http://localhost:8080/api
```

### 3ï¸âƒ£ éªŒè¯æœåŠ¡ (1 åˆ†é’Ÿ)

åœ¨æµè§ˆå™¨è®¿é—®:
```
http://localhost:8080/health
```

**é¢„æœŸå“åº”**:
```json
{
  "status": "ok",
  "message": "æœåŠ¡å™¨æ­£å¸¸è¿è¡Œ",
  "database": "å¾…éƒ¨ç½²"
}
```

---

## ğŸ“ ç¯å¢ƒé…ç½®

### æŸ¥çœ‹ç¯å¢ƒå˜é‡

æ–‡ä»¶ä½ç½®: `packages/backend/.env`

```env
# æœåŠ¡å™¨é…ç½®
PORT=8080
NODE_ENV=development

# æ•°æ®åº“é…ç½®ï¼ˆå¾…éƒ¨ç½²ï¼‰
DB_ENABLED=false          # ä¸å¯ç”¨æ•°æ®åº“
DB_HOST=localhost
DB_PORT=3306
DB_NAME=easy_inn_booking
DB_USER=root
DB_PASSWORD=password

# JWT é…ç½®
JWT_SECRET=easy-inn-booking-secret-key-change-in-production
JWT_EXPIRES_IN=2h
```

### ä¿®æ”¹é…ç½®

#### ä¿®æ”¹æœåŠ¡å™¨ç«¯å£

ç¼–è¾‘ `.env` æ–‡ä»¶:
```env
PORT=8081  # æ”¹ä¸ºéœ€è¦çš„ç«¯å£
```

#### å¯ç”¨æ•°æ®åº“

ç¼–è¾‘ `.env` æ–‡ä»¶:
```env
DB_ENABLED=true  # æ”¹ä¸º true æ¥å¯ç”¨æ•°æ®åº“
```

ç„¶åè®¾ç½®å®é™…çš„æ•°æ®åº“è¿æ¥ä¿¡æ¯:
```env
DB_HOST=your-db-host
DB_PORT=3306
DB_NAME=easy_inn_booking
DB_USER=your-username
DB_PASSWORD=your-password
```

#### æ›´æ”¹ JWT å¯†é’¥

**é‡è¦**: ç”Ÿäº§ç¯å¢ƒå¿…é¡»ä¿®æ”¹ï¼

ç¼–è¾‘ `.env` æ–‡ä»¶:
```env
JWT_SECRET=your-secure-secret-key
JWT_EXPIRES_IN=2h
```

---

## ğŸ§ª æµ‹è¯• API

### æµ‹è¯•æœåŠ¡å¥åº·æ£€æŸ¥

```bash
# ä½¿ç”¨ curl
curl http://localhost:8080/health

# æˆ–åœ¨æµè§ˆå™¨è®¿é—®
http://localhost:8080/health
```

**å“åº”**:
```json
{
  "status": "ok",
  "message": "æœåŠ¡å™¨æ­£å¸¸è¿è¡Œ",
  "database": "å¾…éƒ¨ç½²"
}
```

### æµ‹è¯•ç”¨æˆ·ç™»å½•æ¥å£

**æ³¨æ„**: åœ¨ DB_ENABLED=false çŠ¶æ€ä¸‹ï¼Œæ­¤æ¥å£ä¼šè¿”å›é”™è¯¯ï¼ˆå› ä¸ºæ²¡æœ‰æ•°æ®åº“è¿æ¥ï¼‰

```bash
curl -X POST http://localhost:8080/api/user/login \
  -H "Content-Type: application/json" \
  -d '{
    "username": "admin",
    "password": "e10adc3949ba59abbe56e057f20f883e"
  }'
```

**å“åº”** (æ•°æ®åº“æœªå¯ç”¨æ—¶):
```json
{
  "code": 500,
  "message": "æœåŠ¡å™¨å†…éƒ¨é”™è¯¯",
  "data": null
}
```

---

## ğŸ”§ æ•…éšœæ’é™¤

### âŒ å¯åŠ¨æ—¶æ— æ³•ç›‘å¬ç«¯å£

**é”™è¯¯**: `Error: listen EADDRINUSE: address already in use :::8080`

**è§£å†³æ–¹æ¡ˆ**:

æ–¹æ¡ˆ 1: ä¿®æ”¹ç«¯å£
```bash
# ç¼–è¾‘ .envï¼Œä¿®æ”¹ PORT å€¼
PORT=8081

# é‡æ–°å¯åŠ¨
pnpm dev
```

æ–¹æ¡ˆ 2: ç»ˆæ­¢å ç”¨è¿›ç¨‹
```bash
# Windows - æŸ¥çœ‹å ç”¨è¿›ç¨‹
netstat -ano | findstr :8080

# ç»ˆæ­¢è¿›ç¨‹ (æ›¿æ¢ PID)
taskkill /PID {PID} /F

# Mac/Linux
lsof -i :8080
kill -9 {PID}
```

### âŒ å¯åŠ¨æ—¶æ•°æ®åº“è¿æ¥å¤±è´¥

**é”™è¯¯**: `Error: connect ECONNREFUSED 127.0.0.1:3306`

**åŸå› **: DB_ENABLED=trueï¼Œä½† MySQL æœªè¿è¡Œæˆ–é…ç½®é”™è¯¯

**è§£å†³æ–¹æ¡ˆ**:

æ–¹æ¡ˆ 1: ç¦ç”¨æ•°æ®åº“ï¼ˆå¼€å‘æ¨¡å¼ï¼‰
```bash
# ç¼–è¾‘ .env
DB_ENABLED=false

# é‡æ–°å¯åŠ¨
pnpm dev
```

æ–¹æ¡ˆ 2: å¯åŠ¨ MySQL å¹¶æ­£ç¡®é…ç½®
```bash
# å¯åŠ¨ MySQL (Windows)
net start MySQL80

# å¯åŠ¨ MySQL (Mac)
brew services start mysql

# éªŒè¯è¿æ¥ä¿¡æ¯
mysql -u root -p -h localhost
```

### âŒ TypeScript ç¼–è¯‘é”™è¯¯

**é”™è¯¯**: `error TS2307: Cannot find module '@config/database'`

**è§£å†³æ–¹æ¡ˆ**:

é‡æ–°å®‰è£…ä¾èµ–:
```bash
rm -rf node_modules pnpm-lock.yaml
pnpm install
```

---

## ğŸ“š é¡¹ç›®ç»“æ„å¿«è§ˆ

```
packages/backend/
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ app.ts              â† åº”ç”¨å…¥å£
â”‚   â”œâ”€â”€ config/database.ts  â† æ•°æ®åº“é…ç½®
â”‚   â”œâ”€â”€ controllers/        â† è¯·æ±‚å¤„ç†å™¨
â”‚   â”œâ”€â”€ services/           â† ä¸šåŠ¡é€»è¾‘
â”‚   â”œâ”€â”€ models/             â† æ•°æ®æ¨¡å‹
â”‚   â”œâ”€â”€ routes/             â† è·¯ç”±å®šä¹‰
â”‚   â”œâ”€â”€ middleware/         â† ä¸­é—´ä»¶
â”‚   â”œâ”€â”€ types/              â† ç±»å‹å®šä¹‰
â”‚   â””â”€â”€ utils/              â† å·¥å…·å‡½æ•°
â”œâ”€â”€ db/init.sql             â† æ•°æ®åº“è„šæœ¬
â”œâ”€â”€ .env                    â† ç¯å¢ƒå˜é‡
â””â”€â”€ package.json
```

---

## ğŸ¯ å¯åŠ¨åçš„æ“ä½œ

### 1. åœ¨å‰ç«¯é…ç½®åç«¯ API

ç¼–è¾‘ `packages/web/.env.development`:

```env
VITE_API_BASE_URL=http://localhost:8080/api
```

### 2. å¯åŠ¨å‰ç«¯å¼€å‘æœåŠ¡

```bash
# æ–°å¼€ä¸€ä¸ªç»ˆç«¯
cd packages/web
pnpm dev
```

### 3. æµ‹è¯•å‰åç«¯é€šä¿¡

å‰ç«¯è®¿é—®: http://localhost:3000

å°è¯•ç™»å½•æµç¨‹ï¼ˆéœ€è¦æ•°æ®åº“ï¼‰

---

## ğŸ“Š å¸¸ç”¨å‘½ä»¤

```bash
# å¯åŠ¨å¼€å‘æœåŠ¡
pnpm dev

# ç¼–è¯‘ TypeScript
pnpm build

# æŸ¥çœ‹é¡¹ç›®ç»“æ„
tree -L 2

# æŸ¥çœ‹ç¯å¢ƒå˜é‡
cat .env

# æ¸…é™¤ node_modules
rm -rf node_modules

# é‡æ–°å®‰è£…ä¾èµ–
pnpm install
```

---

## ğŸš€ éƒ¨ç½²æ•°æ®åº“åçš„æ­¥éª¤

å½“ä½ çš„ MySQL æ•°æ®åº“éƒ¨ç½²å®Œæˆå:

### 1. ä¿®æ”¹ .env é…ç½®

```env
DB_ENABLED=true
DB_HOST=your-database-host
DB_PORT=3306
DB_NAME=easy_inn_booking
DB_USER=your-username
DB_PASSWORD=your-password
```

### 2. åˆå§‹åŒ–æ•°æ®åº“

```bash
mysql -u your-username -p < db/init.sql
```

### 3. é‡å¯æœåŠ¡

```bash
# åœæ­¢å½“å‰æœåŠ¡ (Ctrl+C)
pnpm dev
```

### 4. éªŒè¯æ•°æ®åº“è¿æ¥

è®¿é—® http://localhost:8080/health

**é¢„æœŸå“åº”**:
```json
{
  "status": "ok",
  "message": "æœåŠ¡å™¨æ­£å¸¸è¿è¡Œ",
  "database": "å·²è¿æ¥"
}
```

---

## ğŸ’¡ å¼€å‘æç¤º

### ä¿æŒç»ˆç«¯è¾“å‡ºæ¸…æ™°

å¦‚æœè¾“å‡ºè¿‡å¤šï¼Œå¯ä»¥åœ¨ `.env` ä¸­è®¾ç½®:
```env
NODE_ENV=production
```

### è°ƒè¯•æ¨¡å¼

åœ¨ä»£ç ä¸­æ·»åŠ æ—¥å¿—:
```typescript
console.log('è°ƒè¯•ä¿¡æ¯:', data);
```

æ—¥å¿—ä¼šåœ¨ç»ˆç«¯æ˜¾ç¤º

### ä¿®æ”¹ä»£ç è‡ªåŠ¨é‡å¯

ä½¿ç”¨ `pnpm dev` å¯åŠ¨æ—¶ï¼ŒTypeScript æ–‡ä»¶ä¿®æ”¹ä¼šè‡ªåŠ¨é‡å¯æœåŠ¡

---

## âœ… éªŒè¯æ¸…å•

å¯åŠ¨æˆåŠŸåº”æ»¡è¶³:

- [x] æ§åˆ¶å°è¾“å‡º "âœ“ æœåŠ¡å™¨è¿è¡Œåœ¨ http://localhost:8080"
- [x] è®¿é—® http://localhost:8080/health è¿”å› JSON
- [x] å“åº”ä¸­ "status" å­—æ®µå€¼ä¸º "ok"
- [x] å“åº”ä¸­ "database" å­—æ®µå€¼ä¸º "å¾…éƒ¨ç½²" æˆ– "å·²è¿æ¥"
- [x] æ²¡æœ‰ TypeScript ç¼–è¯‘é”™è¯¯

---

## ğŸ†˜ è·å–å¸®åŠ©

### æŸ¥çœ‹è¯¦ç»†æ–‡æ¡£

ğŸ‘‰ [åç«¯æ¶æ„è®¾è®¡.md](åç«¯æ¶æ„è®¾è®¡.md) - äº†è§£ç³»ç»Ÿæ¶æ„

### æŸ¥çœ‹æ—¥å¿—

æœåŠ¡å¯åŠ¨æ—¶çš„æ—¥å¿—ä¼šæ˜¾ç¤ºè¯¦ç»†çš„é”™è¯¯ä¿¡æ¯ï¼Œä»”ç»†æŸ¥çœ‹å¯ä»¥å¿«é€Ÿå®šä½é—®é¢˜

### å¸¸è§é—®é¢˜

**Q: ä¸ºä»€ä¹ˆç™»å½•æ¥å£è¿”å› 500 é”™è¯¯?**  
A: å› ä¸ºæ•°æ®åº“æœªå¯ç”¨ã€‚è®¾ç½® `DB_ENABLED=true` åéœ€è¦éƒ¨ç½² MySQLã€‚

**Q: å¦‚ä½•ä¿®æ”¹æœåŠ¡å™¨ç«¯å£?**  
A: ç¼–è¾‘ `.env` ä¸­çš„ `PORT` å€¼ã€‚

**Q: Token æœ‰æ•ˆæœŸæ˜¯å¤šå°‘?**  
A: é»˜è®¤ 2 å°æ—¶ï¼Œå¯åœ¨ `.env` ä¸­ä¿®æ”¹ `JWT_EXPIRES_IN`ã€‚

**Q: é»˜è®¤è´¦æˆ·ä¿¡æ¯æ˜¯ä»€ä¹ˆ?**  
A: ç”¨æˆ·å: adminï¼Œå¯†ç : 123456 (éœ€è¦æ•°æ®åº“éƒ¨ç½²)

---

## ğŸ“ æ”¯æŒä¿¡æ¯

- **æœåŠ¡åœ°å€**: http://localhost:8080
- **API åŸºç¡€è·¯å¾„**: http://localhost:8080/api
- **å¥åº·æ£€æŸ¥**: http://localhost:8080/health
- **é»˜è®¤ç«¯å£**: 8080

---

**æ–‡æ¡£æ›´æ–°æ—¶é—´**: 2026-02-05  
**ç‰ˆæœ¬**: 1.0.0  
**çŠ¶æ€**: ç”Ÿäº§å°±ç»ª

